<html><head><title>contour_doc</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');.lst-kix_xs2cvpizfk7s-0>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-0,decimal) ". "}.lst-kix_xs2cvpizfk7s-4>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-4}.lst-kix_xs2cvpizfk7s-0>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-0}.lst-kix_xs2cvpizfk7s-8>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-8,lower-roman) ". "}ol.lst-kix_xs2cvpizfk7s-2.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-2 0}ol.lst-kix_xs2cvpizfk7s-0.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-0 0}ol.lst-kix_xs2cvpizfk7s-7.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-7 0}.lst-kix_xs2cvpizfk7s-2>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-2}.lst-kix_9kp1v2e5enfh-4>li:before{content:"\0025cb  "}.lst-kix_xs2cvpizfk7s-6>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-6}ul.lst-kix_9kp1v2e5enfh-7{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-8{list-style-type:none}.lst-kix_9kp1v2e5enfh-1>li:before{content:"\0025cb  "}.lst-kix_xs2cvpizfk7s-4>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-4,lower-latin) ". "}ul.lst-kix_9kp1v2e5enfh-6{list-style-type:none}.lst-kix_xs2cvpizfk7s-3>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-3}ul.lst-kix_9kp1v2e5enfh-5{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-4{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-3{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-2{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-1{list-style-type:none}ul.lst-kix_9kp1v2e5enfh-0{list-style-type:none}.lst-kix_9kp1v2e5enfh-5>li:before{content:"\0025a0  "}ol.lst-kix_xs2cvpizfk7s-1.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-1 0}ol.lst-kix_xs2cvpizfk7s-4{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-3{list-style-type:none}.lst-kix_xs2cvpizfk7s-5>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-5,lower-roman) ". "}ol.lst-kix_xs2cvpizfk7s-6{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-5{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-0{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-8.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-8 0}.lst-kix_9kp1v2e5enfh-7>li:before{content:"\0025cb  "}ol.lst-kix_xs2cvpizfk7s-2{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-1{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-8{list-style-type:none}.lst-kix_xs2cvpizfk7s-7>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-7,lower-latin) ". "}ol.lst-kix_xs2cvpizfk7s-7{list-style-type:none}ol.lst-kix_xs2cvpizfk7s-4.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-4 0}.lst-kix_xs2cvpizfk7s-1>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-1}.lst-kix_xs2cvpizfk7s-7>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-7}.lst-kix_9kp1v2e5enfh-8>li:before{content:"\0025a0  "}.lst-kix_xs2cvpizfk7s-1>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-1,lower-latin) ". "}.lst-kix_9kp1v2e5enfh-3>li:before{content:"\0025cf  "}.lst-kix_9kp1v2e5enfh-2>li:before{content:"\0025a0  "}.lst-kix_xs2cvpizfk7s-6>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-6,decimal) ". "}.lst-kix_xs2cvpizfk7s-3>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-3,decimal) ". "}.lst-kix_xs2cvpizfk7s-5>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-5}ol.lst-kix_xs2cvpizfk7s-6.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-6 0}ol.lst-kix_xs2cvpizfk7s-5.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-5 0}.lst-kix_9kp1v2e5enfh-6>li:before{content:"\0025cf  "}.lst-kix_9kp1v2e5enfh-0>li:before{content:"\0025cf  "}.lst-kix_xs2cvpizfk7s-2>li:before{content:"" counter(lst-ctn-kix_xs2cvpizfk7s-2,lower-roman) ". "}.lst-kix_xs2cvpizfk7s-8>li{counter-increment:lst-ctn-kix_xs2cvpizfk7s-8}ol.lst-kix_xs2cvpizfk7s-3.start{counter-reset:lst-ctn-kix_xs2cvpizfk7s-3 0}ol{margin:0;padding:0}.c28{border-bottom-width:1.5pt;border-top-style:solid;width:111.8pt;border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1.5pt;border-bottom-style:solid;vertical-align:top;border-top-color:#000000;border-left-color:#000000;border-right-color:#000000;border-left-style:solid;border-right-width:1.5pt;border-left-width:1.5pt}.c7{vertical-align:baseline;color:#000000;font-size:8pt;font-style:italic;background-color:#ffffff;font-family:"Courier New";text-decoration:none;font-weight:normal}.c2{padding-left:0pt;line-height:1.5;widows:2;orphans:2;text-align:left;direction:ltr;margin-left:72pt}.c27{vertical-align:baseline;color:#000000;font-size:11pt;font-style:normal;text-decoration:none;font-weight:normal}.c0{widows:2;orphans:2;height:11pt;text-align:left;direction:ltr}.c18{widows:2;orphans:2;height:11pt;direction:ltr}.c9{font-size:8pt;font-style:italic;font-family:"Courier New";font-weight:bold}.c17{widows:2;orphans:2;direction:ltr;page-break-after:avoid}.c5{widows:2;orphans:2;text-align:left;direction:ltr}.c8{color:#1155cc;font-family:"Times New Roman";text-decoration:underline}.c16{margin-right:auto;border-collapse:collapse;margin-left:auto}.c6{line-height:1.15;padding-top:0pt;padding-bottom:0pt}.c21{widows:2;orphans:2;direction:ltr}.c3{color:inherit;text-decoration:inherit}.c25{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c19{margin:0;padding:0}.c1{font-size:8pt;font-family:"Consolas"}.c23{color:#1155cc;text-decoration:underline}.c10{font-size:18pt;font-family:"Times New Roman"}.c14{line-height:1.5;text-indent:36pt}.c12{font-size:8pt;font-family:"Courier New"}.c24{line-height:1.5}.c22{background-color:#ffffff}.c15{font-weight:bold}.c4{margin-left:36pt}.c20{text-indent:36pt}.c26{height:0pt}.c13{font-style:italic}.c11{font-family:"Times New Roman"}.title{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:center;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}.subtitle{widows:2;padding-top:0pt;line-height:1.15;orphans:2;text-align:center;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt;page-break-after:avoid}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:center;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h2{widows:2;padding-top:10pt;line-height:1.15;orphans:2;text-align:center;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h3{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:center;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt;page-break-after:avoid}h4{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:center;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h5{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:center;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}h6{widows:2;padding-top:8pt;line-height:1.15;orphans:2;text-align:center;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt;page-break-after:avoid}</style></head><body class="c22 c25"><p class="c17 title"><a name="h.uy0n4jhs08av"></a><span class="c10">Contour map: Popular Locations </span></p><p class="c21"><span class="c11">James Premo</span></p><p class="c0 c14"><span class="c11"></span></p><p class="c5 c14"><span class="c11">This contour library uses data given in geographic format, latitude (N&deg;) and longitude (E&deg;). A map is generated from openstreetmap [1] </span><span class="c11">then plotted using matplotlib[2] and geotiler[3] libraries. Then a vector field is generated using gaussian kernel density estimation(KDE) from the scipy library [4] . The input for the KDE are the points provided to the library, which were assigned to a numpy array (</span><span class="c13 c11">np.array()</span><span class="c11">). Then this vector field is applied to the </span><span class="c13 c11">matplotlib.contourf()</span><span class="c11">&nbsp;function. Lastly the points are plotted with simple dots using the </span><span class="c13 c11">matplotlib.scatter() </span><span class="c11">function. This can work on any city in the world, or any location. &nbsp; &nbsp; </span></p><p class="c5 c24"><span class="c15 c13 c11">Algorithm:</span></p><ol class="c19 lst-kix_xs2cvpizfk7s-0 start" start="1"><li class="c2"><span class="c11">Read points into numpy array (</span><span class="c13 c11">np.array()</span><span class="c11">)</span><span class="c13 c11">&nbsp;</span><span class="c11">from a file. </span></li><li class="c2"><span class="c11">Find the rough center of points given using the mid point equation. </span></li><li class="c2"><span class="c11">Retrieve map from openstreetmap using the center of the points as the center of the map.</span></li><li class="c2"><span class="c11">Plot the map onto a matplotlib figure.</span></li><li class="c2"><span class="c11">Using the array of points convert them to cartesian, for use in figure.</span></li><li class="c2"><span class="c11">Apply this array to a gaussian kernel density estimate (</span><span class="c13 c11">scipy.stats.gaussian_kde()</span><span class="c11">).</span></li><li class="c2"><span class="c11">Plot the output of the KDE to a contour map (</span><span class="c13 c11">matplotlib.confourf</span><span class="c11">).</span></li><li class="c2"><span class="c11">Layer the contour map over the map image. With a lower alpha to the contour to make it translucent.</span></li><li class="c2"><span class="c11">Output figure to PNG file (or any other format supported by matplotlib). &nbsp;</span></li></ol><p class="c5 c24"><span class="c15 c13 c11">Usage:</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Python 3 IDE</span></p><p class="c0 c4"><span class="c11"></span></p><p class="c5 c4"><span class="c11">&gt;&gt;&gt;import contour</span></p><p class="c5 c20"><span class="c11">&gt;&gt;&gt;contour.Contour(&lsquo;</span><span class="c11 c13">File with points</span><span class="c11">&rsquo;)</span></p><p class="c0 c20"><span class="c11"></span></p><p class="c5 c20"><span class="c11">contour.</span><span class="c15 c13 c11">Contour</span><span class="c11">(</span><span class="c13 c11">filename, pix_size=2000, inch_size=10,dpi=200,zoom=14</span><span class="c11">)</span></p><p class="c0 c4"><span class="c11"></span></p><p class="c5 c4"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15 c13 c11">filename</span><span class="c11">: Filename containing points.</span></p><p class="c5 c4"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15 c13 c11">zoom: </span><span class="c11">Zoom of openstreetmap.</span></p><p class="c5 c4"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15 c13 c11">pix_size: </span><span class="c11">Size of image downloaded from open-street map. </span></p><p class="c5 c4"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c13 c11 c15">inch_size: </span><span class="c11">Size of </span><span class="c13 c11">matplotlib </span><span class="c11">figure in inches.</span></p><p class="c5 c4"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c15 c13 c11">dpi: </span><span class="c11">Number of pixels per inch of </span><span class="c13 c11">matplotlib </span><span class="c11">figure.</span></p><p class="c0"><span class="c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c5"><span class="c15 c13 c11">File Format:</span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c5 c20"><span class="c11">The format for the file of points has to be in the format: [</span><span class="c13 c11">latitude,longitude</span><span class="c11">]. Separated by a &nbsp;comma with no space, and each coordinate has to be be on new line. The file should be plain text ASCII.</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Latitude: Has to be in terms of N&deg;. (Incorrect: </span><span class="c13 c11">1&deg; S </span><span class="c11">&nbsp;Correct: </span><span class="c13 c11">-1&deg; N </span><span class="c11">)</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Longitude: Has to be in terms of E&deg;. (Incorrect: </span><span class="c13 c11">1&deg; W </span><span class="c11">Correct: </span><span class="c13 c11">-1</span><span class="c11">&deg; E)</span></p><p class="c0"><span class="c11"></span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sample data Random points in London:</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c21"><span class="c11">[</span><span class="c13 c11">Latitude</span><span class="c11">&deg; N, </span><span class="c13 c11">Longitude</span><span class="c11">&deg; E]</span></p><p class="c0"><span class="c11"></span></p><a href="#" name="97ae2caa9f7dc381250a872992f5205669610975"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c16"><tbody><tr class="c26"><td class="c28" colspan="1" rowspan="1"><p class="c5 c6"><span class="c7">51.50308,-0.125999</span></p><p class="c5 c6"><span class="c7">51.50308,-0.125999</span></p><p class="c5 c6"><span class="c7">51.50308,-0.125999</span></p><p class="c5 c6"><span class="c7">51.513123,-0.124626</span></p><p class="c5 c6"><span class="c7">51.509704,-0.137501</span></p><p class="c5 c6"><span class="c7">51.497523,-0.120678</span></p><p class="c5 c6"><span class="c7">51.504041,-0.102825</span></p><p class="c5 c6"><span class="c7">51.517609,-0.103168</span></p><p class="c5 c6"><span class="c7">51.517823,-0.125484</span></p><p class="c5 c6"><span class="c7">51.526261,-0.120506</span></p><p class="c5 c6"><span class="c7">51.51793,-0.092354</span></p><p class="c5 c6"><span class="c7">51.504148,-0.096989</span></p><p class="c5 c6"><span class="c7">51.494317,-0.11364</span></p><p class="c5 c6"><span class="c7">51.49111,-0.136642</span></p><p class="c5 c6"><span class="c7">51.506926,-0.148487</span></p><p class="c5 c6"><span class="c7">51.521028,-0.11879</span></p><p class="c5 c6"><span class="c7">51.513657,-0.074158</span></p><p class="c5 c6"><span class="c7">51.501904,-0.098362</span></p><p class="c5 c6"><span class="c7">51.493568,-0.112438</span></p><p class="c5 c6"><span class="c7">51.504575,-0.113983</span></p><p class="c5 c6"><span class="c7">51.49763,-0.106602</span></p><p class="c5 c6"><span class="c12 c22 c13">51.510345,-0.106602</span></p></td></tr></tbody></table><p class="c18"><span class="c11"></span></p><p class="c21"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c0"><span class="c11"></span></p><p class="c0"><span class="c11"></span></p><p class="c0"><span class="c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c0"><span class="c15 c13 c11"></span></p><p class="c5"><span class="c15 c13 c11">Examples:</span></p><p class="c5"><span class="c15 c11">Top left: London (Popular Places) Top Right: London (Random Points)</span></p><p class="c5"><span class="c15 c11">Bottom Left: New York City (Popular places) Bottom Right: Paris (Popular Places)</span><span class="c15 c13 c11">&nbsp;</span></p><p class="c5"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 364.00px; height: 364.00px;"><img alt="test.png" src="images/image02.png" style="width: 364.00px; height: 364.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 364.00px; height: 362.21px;"><img alt="" src="images/image00.png" style="width: 364.00px; height: 362.21px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 364.00px; height: 364.00px;"><img alt="" src="images/image03.png" style="width: 364.00px; height: 364.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 364.00px; height: 364.00px;"><img alt="test (1).png" src="images/image01.png" style="width: 364.00px; height: 364.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c11"></span></p><p class="c5"><span class="c15 c13 c11">Reference:</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c5 c20"><span class="c11">[1]: </span><span class="c8"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fopenstreetmap.org&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNG2WFTvmHx7q6waA1AslMArMbf7jQ">http://openstreetmap.org</a></span><span class="c11">/</span><span class="c11">&nbsp;</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[2]: </span><span class="c8"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fmatplotlib.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNGNWyGb-ahFX6UrtBl4Qq5gBYe_4g">http://matplotlib.org/</a></span><span class="c11">&nbsp;</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[3]: </span><span class="c8"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fwrobell.it-zone.org%2Fgeotiler%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHg9-KW3EftJIDeRRHF_BGqJ3Sgmw">http://wrobell.it-zone.org/geotiler/</a></span><span class="c11">&nbsp;</span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[4]: </span><span class="c8"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fwww.scipy.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEF6XlDezekF_OlP-x2ToOuyiHKFA">http://www.scipy.org/</a></span></p><p class="c5"><span class="c11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[5]: </span><span class="c8"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fwww.numpy.org%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHgKA4UzxuREb739d3oGWiJdrFNww">http://www.numpy.org/</a></span></p><p class="c0"><span></span></p><p class="c0"><span></span></p><p class="c5"><span class="c15 c13 c11">Source code:</span></p><p class="c5"><span class="c1 c15 c13">#start of code</span></p><p class="c5"><span class="c1">#The MIT license (MIT)</span></p><p class="c5"><span class="c1">#</span></p><p class="c5"><span class="c1">#Copyright (c) 2014 James Premo</span></p><p class="c5"><span class="c1">#</span></p><p class="c5"><span class="c1">#Permission is hereby granted, free of charge, to any person obtaining a copy</span></p><p class="c5"><span class="c1">#of this software and associated documentation files (the &quot;Software&quot;), to deal</span></p><p class="c5"><span class="c1">#in the Software without restriction, including without limitation the rights</span></p><p class="c5"><span class="c1">#to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></p><p class="c5"><span class="c1">#copies of the Software, and to permit persons to whom the Software is</span></p><p class="c5"><span class="c1">#furnished to do so, subject to the following conditions:</span></p><p class="c5"><span class="c1">#</span></p><p class="c5"><span class="c1">#The above copyright notice and this permission notice shall be included in</span></p><p class="c5"><span class="c1">#all copies or substantial portions of the Software.</span></p><p class="c5"><span class="c1">#</span></p><p class="c5"><span class="c1">#THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></p><p class="c5"><span class="c1">#IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></p><p class="c5"><span class="c1">#FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></p><p class="c5"><span class="c1">#AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></p><p class="c5"><span class="c1">#LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></p><p class="c5"><span class="c1">#OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></p><p class="c5"><span class="c1">#THE SOFTWARE.</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">#!/usr/bin/python</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">import matplotlib</span></p><p class="c5"><span class="c1">import matplotlib.pyplot as plt</span></p><p class="c5"><span class="c1">import numpy as np</span></p><p class="c5"><span class="c1">import geotiler</span></p><p class="c5"><span class="c1">from scipy.stats import gaussian_kde</span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">class Contour():</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; def __init__(self, in_f,pix_size=2000,inch_size=10,dpi=200,zoom=14):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #init varibles</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.in_f = in_f</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.np = np</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.plt = plt</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.zoom = zoom</span></p><p class="c5 c20"><span class="c1">self.pix_size = pix_size</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.inch_size = inch_size</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.dpi = dpi</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #start fig</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.fig = self.plt.figure(figsize=(self.inch_size, self.inch_size), dpi=self.dpi)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.ax = self.plt.subplot(111)</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #init func.</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.cor_array()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; def bounds(self):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #min/max</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; xmin = self.a[:,0].min()</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; xmax = self.a[:,0].max()</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; ymin = self.a[:,1].min()</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; ymax = self.a[:,1].max()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #center</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; midx = (xmax + xmin)/2</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; midy = (ymax + ymin)/2</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.center = (float(midx), float(midy))</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.map_l()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; def map_l(self):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #download map and plot map</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.mm = geotiler.Map(center=self.center, zoom=self.zoom, size =(self.pix_size,self.pix_size))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.img = geotiler.render_map(self.mm)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.ax.imshow(self.img)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.contour_l()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; def cor_array(self):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #open file</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; f = open(self.in_f,&quot;r&quot;)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #init array</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; initline = f.readline()</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; initline = initline.rstrip(&#39;\n&#39;)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; initline = tuple(float(x) for x in initline.split(&quot;,&quot;))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.a = np.array((initline[1],initline[0]))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #put rest of data into array</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; for line in f:</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if line == &#39;\n&#39;:</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line = line.rstrip(&#39;\n&#39;)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; line = tuple(float(x) for x in line.split(&quot;,&quot;))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = np.array((line[1],line[0]))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.a = np.vstack((self.a,b))</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.bounds()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; def contour_l(self):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #lat,long to x,y</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; x, y = zip(*(self.mm.rev_geocode(p) for p in self.a))</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.a = np.array([x,y])</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #data shaping</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; X, Y = np.mgrid[0:self.pix_size:100j, 0:self.pix_size:100j]</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; positions = np.vstack([X.ravel(),Y.ravel()])</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; kernel = gaussian_kde(self.a)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; Z = np.reshape(kernel(positions).T, X.shape)</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #plot</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.ax.contourf(X,Y,Z,cmap=&#39;rainbow&#39;,alpha=.5,linewidth=.4)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.ax.scatter(x, y, c=&#39;black&#39;, edgecolor=&#39;white&#39;, s=10, alpha=0.9)</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.layer_out()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp;</span></p><p class="c5"><span class="c1">&nbsp;def layer_out(self):</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #remove tics</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.plt.gca().xaxis.set_major_locator(plt.NullLocator())</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.plt.gca().yaxis.set_major_locator(plt.NullLocator())</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; #output png</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.plt.savefig(&#39;test.png&#39;, bbox_inches=&#39;tight&#39;)</span></p><p class="c5"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; self.plt.close()</span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">Contour(&#39;pnts_ny.txt&#39;)</span></p><p class="c5"><span class="c1 c15 c13">#end of code</span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p><p class="c5"><span class="c1">Points list created using, </span><span class="c1 c23"><a class="c3" href="http://www.google.com/url?q=http%3A%2F%2Fwww.findlatitudeandlongitude.com%2Fclick-lat-lng-list%2F%23.U7nmSfldXe0&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNF8iwnOZCN8NrlzFCR-I4RX8O-KgQ">Click Latitude, Longitude</a></span><span class="c1">.</span></p><p class="c0"><span class="c12"></span></p><p class="c5"><span class="c9">pnts_ny.txt:</span></p><p class="c0"><span class="c12"></span></p><p class="c5"><span class="c12">&ldquo;40.7189,-73.996181\n40.71877,-73.999271\n</span></p><p class="c5"><span class="c12">40.7189,-73.995667\n40.721632,-73.995323\n</span></p><p class="c5"><span class="c12">40.721762,-74.001846\n40.716558,-73.998756\n</span></p><p class="c5"><span class="c12">40.721762,-73.998241\n40.727096,-74.000473\n</span></p><p class="c5"><span class="c12">40.712394,-74.004421\n40.769102,-73.972492\n</span></p><p class="c5"><span class="c12">40.768842,-73.977985\n40.771572,-73.974724\n</span></p><p class="c5"><span class="c12">40.75506,-73.98365\n40.743225,-73.981934\n</span></p><p class="c5"><span class="c12">40.749858,-73.98983\n40.75714,-73.987427\n</span></p><p class="c5"><span class="c12">40.762081,-73.97953\n40.762601,-73.990688\n</span></p><p class="c5"><span class="c12">40.749728,-73.988628\n40.738933,-73.985195\n</span></p><p class="c5"><span class="c12">40.748948,-73.987942\n40.749728,-73.978329\n</span></p><p class="c5"><span class="c12">40.751158,-73.991718\n40.744526,-73.993607\n</span></p><p class="c5"><span class="c12">40.746867,-73.982449\n40.751548,-73.990345\n</span></p><p class="c5"><span class="c12">40.746997,-73.995495\n40.747777,-73.982449\n</span></p><p class="c5"><span class="c12">40.752719,-73.98777\n40.749078,-73.994122\n</span></p><p class="c5"><span class="c12">40.744266,-73.983307\n40.746347,-73.9888\n</span></p><p class="c5"><span class="c12">40.749078,-73.987942\n40.752719,-73.982964\n</span></p><p class="c5"><span class="c12">40.75571,-73.973007\n40.747257,-73.99292\n</span></p><p class="c5"><span class="c12">40.738413,-73.997211\n40.716168,-73.996181\n</span></p><p class="c5"><span class="c12">40.715777,-74.002361\n40.722673,-74.003391\n</span></p><p class="c5"><span class="c12">40.725405,-73.995323\n40.717339,-73.997898\n</span></p><p class="c5"><span class="c12">40.708881,-74.007854\n40.725665,-73.996181\n</span></p><p class="c5"><span class="c12">40.737893,-73.989658\n40.733991,-73.996353\n</span></p><p class="c5"><span class="c12">40.736852,-73.9991\n40.728917,-73.996868\n</span></p><p class="c5"><span class="c12">40.715908,-74.002533\n40.724234,-73.994465\n</span></p><p class="c5"><span class="c12">40.731909,-73.999958 \n40.725015,-73.990173\n</span></p><p class="c5"><span class="c12">40.729958,-73.988457 \n40.735161,-73.98674\n</span></p><p class="c5"><span class="c12">40.740754,-73.986053 \n40.746217,-73.985367\n</span></p><p class="c5"><span class="c12">40.750378,-73.987942\n40.728267,-73.991203\n</span></p><p class="c5"><span class="c12">40.716168,-73.993263\n40.721242,-73.986053\n</span></p><p class="c5"><span class="c12">40.724885,-74.003563\n40.720721,-73.996525\n</span></p><p class="c5"><span class="c12">40.722022,-73.999271\n40.750378,-73.967085\n</span></p><p class="c5"><span class="c12">40.749403,-73.968716\n40.751223,-73.967085\n</span></p><p class="c5"><span class="c12">40.752784,-73.966742\n40.779307,-73.96245\n</span></p><p class="c5"><span class="c12">40.775537,-73.962708\n40.779177,-73.962536\n</span></p><p class="c5"><span class="c12">40.779892,-73.959961\n40.798477,-73.952923\n</span></p><p class="c5"><span class="c12">40.796528,-73.949318\n40.794968,-73.947601\n</span></p><p class="c5"><span class="c12">40.793604,-73.952665\n&rdquo;</span></p><p class="c0"><span class="c12"></span></p></body></html>